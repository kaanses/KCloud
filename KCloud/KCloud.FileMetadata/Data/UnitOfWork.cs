// KCloud.Auth/Data/UnitOfWork.csusing KCloud.FileMetadata.Interfaces;namespace KCloud.FileMetadata.Data;public class UnitOfWork(FileMetadataDbContext context) : IUnitOfWork, IDisposable{    private Dictionary<Type, object>? _repositories;    private bool _disposed = false;    public IRepository<T> Repository<T>() where T : class    {        _repositories ??= new Dictionary<Type, object>();        var type = typeof(T);        if (!_repositories.ContainsKey(type))        {            _repositories[type] = new Repository<T>(context);        }        return (IRepository<T>)_repositories[type];    }    public async Task<int> CommitAsync(CancellationToken cancellationToken = default)    {        return await context.SaveChangesAsync(cancellationToken);    }            public void Dispose()    {        Dispose(true);        GC.SuppressFinalize(this);    }        protected virtual void Dispose(bool disposing)    {        if (!_disposed)        {            if (disposing)            {                context.Dispose();            }        }        _disposed = true;    }}