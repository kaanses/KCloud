using KCloud.Auth.Models;using KCloud.Auth.Models.Entity;using Microsoft.EntityFrameworkCore;namespace KCloud.Auth.Data;public class AuthDbContext(DbContextOptions<AuthDbContext> options) : DbContext(options){    public DbSet<User> Users { get; set; }    public DbSet<RefreshToken> RefreshTokens { get; set; }    protected override void OnModelCreating(ModelBuilder modelBuilder)    {        base.OnModelCreating(modelBuilder);        // Configure User entity        modelBuilder.Entity<User>(entity =>        {            entity.HasKey(e => e.Id);            entity.Property(e => e.Username).IsRequired().HasMaxLength(50);            entity.Property(e => e.Email).IsRequired().HasMaxLength(100);            entity.Property(e => e.PasswordHash).IsRequired();            entity.Property(e => e.Role).HasMaxLength(20);                                    // Add unique constraint            entity.HasIndex(e => e.Email).IsUnique();            entity.HasIndex(e => e.Username).IsUnique();                        // Define the one-to-one relationship from User to RefreshToken            entity.HasOne(u => u.RefreshToken)                .WithOne(rt => rt.User)                .HasForeignKey<RefreshToken>(rt => rt.UserId)                .OnDelete(DeleteBehavior.Cascade);        });        // Configure RefreshToken entity        modelBuilder.Entity<RefreshToken>(entity =>        {            entity.HasKey(e => e.Id);            entity.Property(e => e.Token).IsRequired();            entity.Property(e => e.ExpiryTime).IsRequired();                        // Ensure UserId is unique (one refresh token per user)            entity.HasIndex(e => e.UserId).IsUnique();        });    }}